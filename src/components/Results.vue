<template>
  <div>
    <p class="statistics">
      ã‚ãªãŸã®æˆç¸¾: {{ successCount }}/{{ totalCount }} ï¼ æˆåŠŸç‡
      {{ successRate }} %
    </p>

    <p>
      <button class="button share" @click="shareResult">
        <b-icon icon="share" />
        <span>æˆç¸¾ã‚’å…±æœ‰ã™ã‚‹</span>
      </button>
    </p>
  </div>
</template>

<script>
import BIcon from 'buefy/src/components/icon/Icon';

export default {
  name: 'results',
  components: { BIcon },
  props: {
    successCount: { type: Number },
    successRate: { type: Number },
    totalCount: { type: Number },
    results: { type: Array },
  },
  computed: {
    shareText() {
      return `ã‚ãªãŸã¯ ${
        this.successCount
      } å€‹ã®ã‚¹ã‚¿ã‚¡ğŸŒŸã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ãŸï¼ æˆåŠŸç‡ã¯ ${this.successRate} % (${
        this.successCount
      }/${this.totalCount}) ã§ã™ï¼\n${this.resultsEmoji}\n\n${
        document.title
      }\n#ã‚­ãƒ³ãƒ—ãƒªãƒ©ãƒƒã‚·ãƒ¥ã‚„ã£ã¦ã¿ãŸã‚¢ãƒ—ãƒª`;
    },

    resultsEmoji() {
      return this.results.map(result => (result ? 'ğŸŒŸ' : 'ğŸŒŒ'))
        .join('');
    },
  },
  methods: {
    shareResult() {
      navigator.share({
        title: 'ã‚­ãƒ³ãƒ—ãƒªãƒ©ãƒƒã‚·ãƒ¥ã‚„ã£ã¦ã¿ãŸã‚¢ãƒ—ãƒª',
        url: 'https://skrm.ch/kinpri-rush-minigame-simulator/',
        text: this.shareText,
      });
    },
  },
};
</script>

<style scoped></style>
